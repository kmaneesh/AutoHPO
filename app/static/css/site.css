html, body { height: 100%; margin: 0; }
body { font-family: system-ui, sans-serif; padding: 0; }
.page-wrap { display: flex; height: 100vh; overflow: hidden; }
.main-content { flex: 1; overflow: hidden; padding: 0 1rem 1rem; max-width: 900px; margin: 0 auto; display: flex; flex-direction: column; min-height: 0; }
.main-content .panel:not(.panel-chat) { overflow: auto; }
.page-header { padding-top: 1rem; flex-shrink: 0; }
h1 { margin-bottom: 0.25rem; }
.muted { color: #666; font-size: 0.9rem; }
label { display: block; margin-top: 0.75rem; margin-bottom: 0.25rem; }
input[type="text"], textarea { width: 100%; padding: 0.5rem; box-sizing: border-box; font-family: inherit; resize: vertical; }
textarea { min-height: 3rem; }
select { padding: 0.35rem 0.5rem; }
button { margin-top: 0.5rem; padding: 0.5rem 1rem; cursor: pointer; }
.loading { color: #666; }
.error { color: #c00; }
.query-sent { margin-bottom: 0.75rem; font-size: 0.9rem; }
.query-sent code { background: #eee; padding: 0.15rem 0.4rem; border-radius: 4px; word-break: break-all; }
.hpo-id { font-weight: 600; color: #055; }

/* Tabs */
.mode-tabs { display: flex; gap: 0.5rem; margin: 1rem 0 0.5rem; }
.mode-tabs [role="tab"] { padding: 0.5rem 1rem; cursor: pointer; border: 1px solid #ccc; background: #f9f9f9; border-radius: 4px; }
.mode-tabs [role="tab"][aria-selected="true"] { background: #055; color: #fff; border-color: #055; }
.panel { margin-top: 0.75rem; }
.panel.hidden { display: none; }

/* Chat full height */
.mode-tabs { flex-shrink: 0; }
.panel-chat { display: flex; flex-direction: column; flex: 1; min-height: 0; margin-top: 0.75rem; }
.panel-chat.hidden { display: none; }
.chat-panel { display: flex; flex-direction: column; flex: 1; min-height: 0; }
.chat-history { flex: 1; min-height: 0; overflow-y: auto; padding: 0.75rem; background: #f9f9f9; border-radius: 6px; margin-bottom: 0.5rem; }
.chat-msg { margin-bottom: 0.75rem; }
.chat-msg .chat-bubble { padding: 0.6rem 0.75rem; border-radius: 8px; max-width: 100%; display: block; word-break: break-word; }
.chat-msg-user .chat-bubble { background: #e3f2fd; }
.chat-msg-agent .chat-bubble { background: #e8f5e9; }
.chat-msg-loading .chat-bubble { color: #555; }
.chat-form { flex-shrink: 0; }
.chat-form button:disabled,
.chat-form textarea:disabled { opacity: 0.7; cursor: not-allowed; }

/* Agent output table */
.extract-table { width: 100%; border-collapse: collapse; font-size: 0.9rem; margin: 0.5rem 0; }
.extract-table th, .extract-table td { border: 1px solid #ccc; padding: 0.5rem 0.75rem; text-align: left; vertical-align: top; }
.extract-table th { background: #055; color: #fff; font-weight: 600; }
.extract-table tbody tr:nth-child(even) { background: #f5f5f5; }
.extract-table .col-term { min-width: 10rem; }
.extract-table .col-hpo-id { width: 12rem; }
.extract-table .col-def { min-width: 14rem; }
.extract-table .hpo-result-row { margin-bottom: 0.4rem; padding-bottom: 0.35rem; border-bottom: 1px solid #eee; font-size: 0.85rem; }
.extract-table .hpo-result-row:last-child { margin-bottom: 0; padding-bottom: 0; border-bottom: none; }

.spinner {
  display: inline-block;
  width: 1em;
  height: 1em;
  border: 2px solid #ccc;
  border-top-color: #055;
  border-radius: 50%;
  margin-right: 0.5rem;
  vertical-align: middle;
  animation: spin 0.8s linear infinite;
}
@keyframes spin {
  to { transform: rotate(360deg); }
}

/* Debug toggle button â€” fixed top-right */
.debug-toggle { position: fixed; top: 0.75rem; right: 0.75rem; z-index: 1000; width: 2.2rem; height: 2.2rem; border-radius: 6px; border: 1px solid #ccc; background: #f9f9f9; color: #555; font-size: 1rem; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; line-height: 1; padding: 0; margin: 0; transition: background 0.15s, color 0.15s; }
.debug-toggle:hover { background: #eee; }
.debug-toggle.active { background: #055; color: #fff; border-color: #055; }
.sr-only { position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0,0,0,0); border: 0; }

/* Debug sidebar (right, collapsible, full browser height) */
.debug-sidebar { position: fixed; top: 0; right: 0; bottom: 0; width: 0; overflow: hidden; background: #fafafa; border-left: none; transition: width 0.2s ease; display: flex; flex-direction: column; z-index: 999; }
.debug-sidebar.open { width: 360px; min-width: 300px; border-left: 1px solid #ddd; }
.debug-details { padding: 0.75rem 1rem 0.5rem; font-size: 0.8rem; overflow-y: auto; flex: 1; min-height: 0; }
.debug-details summary { cursor: pointer; font-weight: 600; margin-bottom: 0.25rem; }
.debug-content { background: #1e1e1e; color: #d4d4d4; padding: 0.75rem; border-radius: 6px; overflow: auto; flex: 1; white-space: pre-wrap; word-break: break-word; }
.debug-content pre { margin: 0.25rem 0; }

/* Search result */
.search-result { margin-top: 0.75rem; padding: 1rem; background: #f5f5f5; border-radius: 6px; min-height: 2rem; }
.search-result .result-list { margin: 0; padding-left: 1.25rem; }
.search-result .result-list li { margin: 0.35rem 0; }
